"use strict";(self.webpackChunkgraphiql_app_for_wp=self.webpackChunkgraphiql_app_for_wp||[]).push([[5824],{5824(e,t,o){function n(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function r(e){return"object"===n(e)}function i(e,t){return e.length<124?e:t}o.d(t,{createClient:()=>u});var a,s;function c(e){if(!r(e))throw new Error("Message is expected to be an object, but got ".concat(n(e)));if(!e.type)throw new Error("Message is missing the 'type' property");if("string"!==typeof e.type)throw new Error("Message is expects the 'type' property to be a string, but got ".concat(n(e.type)));switch(e.type){case s.ConnectionInit:case s.ConnectionAck:case s.Ping:case s.Pong:if(null!=e.payload&&!r(e.payload))throw new Error('"'.concat(e.type,"\" message expects the 'payload' property to be an object or nullish or missing, but got \"").concat(e.payload,'"'));break;case s.Subscribe:if("string"!==typeof e.id)throw new Error('"'.concat(e.type,"\" message expects the 'id' property to be a string, but got ").concat(n(e.id)));if(!e.id)throw new Error('"'.concat(e.type,"\" message requires a non-empty 'id' property"));if(!r(e.payload))throw new Error('"'.concat(e.type,"\" message expects the 'payload' property to be an object, but got ").concat(n(e.payload)));if("string"!==typeof e.payload.query)throw new Error('"'.concat(e.type,"\" message payload expects the 'query' property to be a string, but got ").concat(n(e.payload.query)));if(null!=e.payload.variables&&!r(e.payload.variables))throw new Error('"'.concat(e.type,"\" message payload expects the 'variables' property to be a an object or nullish or missing, but got ").concat(n(e.payload.variables)));if(null!=e.payload.operationName&&"string"!==n(e.payload.operationName))throw new Error('"'.concat(e.type,"\" message payload expects the 'operationName' property to be a string or nullish or missing, but got ").concat(n(e.payload.operationName)));if(null!=e.payload.extensions&&!r(e.payload.extensions))throw new Error('"'.concat(e.type,"\" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ").concat(n(e.payload.extensions)));break;case s.Next:if("string"!==typeof e.id)throw new Error('"'.concat(e.type,"\" message expects the 'id' property to be a string, but got ").concat(n(e.id)));if(!e.id)throw new Error('"'.concat(e.type,"\" message requires a non-empty 'id' property"));if(!r(e.payload))throw new Error('"'.concat(e.type,"\" message expects the 'payload' property to be an object, but got ").concat(n(e.payload)));break;case s.Error:if("string"!==typeof e.id)throw new Error('"'.concat(e.type,"\" message expects the 'id' property to be a string, but got ").concat(n(e.id)));if(!e.id)throw new Error('"'.concat(e.type,"\" message requires a non-empty 'id' property"));if(t=e.payload,!(Array.isArray(t)&&t.length>0&&t.every(e=>"message"in e)))throw new Error('"'.concat(e.type,"\" message expects the 'payload' property to be an array of GraphQL errors, but got ").concat(JSON.stringify(e.payload)));break;case s.Complete:if("string"!==typeof e.id)throw new Error('"'.concat(e.type,"\" message expects the 'id' property to be a string, but got ").concat(n(e.id)));if(!e.id)throw new Error('"'.concat(e.type,"\" message requires a non-empty 'id' property"));break;default:throw new Error("Invalid message 'type' property \"".concat(e.type,'"'))}var t;return e}function l(e,t){return c(e),JSON.stringify(e,t)}!function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"}(a||(a={})),function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"}(s||(s={}));var p=function(e){return this instanceof p?(this.v=e,this):new p(e)},d=function(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=o.apply(e,t||[]),i=[];return n=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){r[e]&&(n[e]=function(t){return new Promise(function(o,n){i.push([e,t,o,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{(o=r[e](t)).value instanceof p?Promise.resolve(o.value.v).then(c,l):d(i[0][2],o)}catch(n){d(i[0][3],n)}var o}function c(e){s("next",e)}function l(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}};function u(e){const{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:u=console.error,lazyCloseTimeout:m=0,keepAlive:g=0,disablePong:h,connectionAckWaitTimeout:w=0,retryAttempts:b=5,retryWait:v=async function(e){let t=1e3;for(let o=0;o<e;o++)t*=2;await new Promise(e=>setTimeout(e,t+Math.floor(2700*Math.random()+300)))},shouldRetry:x=f,isFatalConnectionProblem:E,on:S,webSocketImpl:C,generateID:k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},jsonMessageReplacer:I,jsonMessageReviver:N}=e;let T;if(C){if(!("function"===typeof(P=C)&&"constructor"in P&&"CLOSED"in P&&"CLOSING"in P&&"CONNECTING"in P&&"OPEN"in P))throw new Error("Invalid WebSocket implementation provided");T=C}else"undefined"!==typeof WebSocket?T=WebSocket:"undefined"!==typeof o.g?T=o.g.WebSocket||o.g.MozWebSocket:"undefined"!==typeof window&&(T=window.WebSocket||window.MozWebSocket);var P;if(!T)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const A=T,q=(()=>{const e=(()=>{const e={};return{on:(t,o)=>(e[t]=o,()=>{delete e[t]}),emit(t){var o;"id"in t&&(null===(o=e[t.id])||void 0===o||o.call(e,t))}}})(),t={connecting:(null===S||void 0===S?void 0:S.connecting)?[S.connecting]:[],opened:(null===S||void 0===S?void 0:S.opened)?[S.opened]:[],connected:(null===S||void 0===S?void 0:S.connected)?[S.connected]:[],ping:(null===S||void 0===S?void 0:S.ping)?[S.ping]:[],pong:(null===S||void 0===S?void 0:S.pong)?[S.pong]:[],message:(null===S||void 0===S?void 0:S.message)?[e.emit,S.message]:[e.emit],closed:(null===S||void 0===S?void 0:S.closed)?[S.closed]:[],error:(null===S||void 0===S?void 0:S.error)?[S.error]:[]};return{onMessage:e.on,on(e,o){const n=t[e];return n.push(o),()=>{n.splice(n.indexOf(o),1)}},emit(e){for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];for(const i of[...t[e]])i(...n)}}})();function M(e){const t=[q.on("error",o=>{t.forEach(e=>e()),e(o)}),q.on("closed",o=>{t.forEach(e=>e()),e(o)})]}let O,R,W=0,j=!1,z=0,B=!1;async function _(){clearTimeout(R);const[e,o]=await(null!==O&&void 0!==O?O:O=new Promise((e,o)=>(async()=>{if(j){if(await v(z),!W)return O=void 0,o({code:1e3,reason:"All Subscriptions Gone"});z++}q.emit("connecting",j);const r=new A("function"===typeof t?await t():t,"graphql-transport-ws");let p,d;function u(){isFinite(g)&&g>0&&(clearTimeout(d),d=setTimeout(()=>{r.readyState===A.OPEN&&(r.send(l({type:s.Ping})),q.emit("ping",!1,void 0))},g))}M(e=>{O=void 0,clearTimeout(p),clearTimeout(d),o(e),e instanceof y&&(r.close(4499,"Terminated"),r.onerror=null,r.onclose=null)}),r.onerror=e=>q.emit("error",e),r.onclose=e=>q.emit("closed",e),r.onopen=async()=>{try{q.emit("opened",r);const e="function"===typeof n?await n():n;if(r.readyState!==A.OPEN)return;r.send(l(e?{type:s.ConnectionInit,payload:e}:{type:s.ConnectionInit},I)),isFinite(w)&&w>0&&(p=setTimeout(()=>{r.close(a.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},w)),u()}catch(e){q.emit("error",e),r.close(a.InternalClientError,i(e instanceof Error?e.message:new Error(e).message,"Internal client error"))}};let f=!1;r.onmessage=t=>{let{data:o}=t;try{const t=function(e,t){return c("string"===typeof e?JSON.parse(e,t):e)}(o,N);if(q.emit("message",t),"ping"===t.type||"pong"===t.type)return q.emit(t.type,!0,t.payload),void("pong"===t.type?u():h||(r.send(l(t.payload?{type:s.Pong,payload:t.payload}:{type:s.Pong})),q.emit("pong",!1,t.payload)));if(f)return;if(t.type!==s.ConnectionAck)throw new Error("First message cannot be of type ".concat(t.type));clearTimeout(p),f=!0,q.emit("connected",r,t.payload,j),j=!1,z=0,e([r,new Promise((e,t)=>M(t))])}catch(n){r.onmessage=null,q.emit("error",n),r.close(a.BadResponse,i(n instanceof Error?n.message:new Error(n).message,"Bad response"))}}})()));e.readyState===A.CLOSING&&await o;let r=()=>{};const p=new Promise(e=>r=e);return[e,r,Promise.race([p.then(()=>{if(!W){const t=()=>e.close(1e3,"Normal Closure");isFinite(m)&&m>0?R=setTimeout(()=>{e.readyState===A.OPEN&&t()},m):t()}}),o])]}function F(e){if(f(e)&&(t=e.code,![1e3,1001,1006,1005,1012,1013,1014].includes(t)&&t>=1e3&&t<=1999||[a.InternalServerError,a.InternalClientError,a.BadRequest,a.BadResponse,a.Unauthorized,a.SubprotocolNotAcceptable,a.SubscriberAlreadyExists,a.TooManyInitialisationRequests].includes(e.code)))throw e;var t;if(B)return!1;if(f(e)&&1e3===e.code)return W>0;if(!b||z>=b)throw e;if(!x(e))throw e;if(null===E||void 0===E?void 0:E(e))throw e;return j=!0}function G(e,t){const o=k(e);let n=!1,r=!1,i=()=>{W--,n=!0};return(async()=>{for(W++;;)try{const[a,c,p]=await _();if(n)return c();const d=q.onMessage(o,e=>{switch(e.type){case s.Next:return void t.next(e.payload);case s.Error:return r=!0,n=!0,t.error(e.payload),void i();case s.Complete:return n=!0,void i()}});return a.send(l({id:o,type:s.Subscribe,payload:e},I)),i=()=>{n||a.readyState!==A.OPEN||a.send(l({id:o,type:s.Complete},I)),W--,n=!0,c()},void await p.finally(d)}catch(a){if(!F(a))return}})().then(()=>{r||t.complete()}).catch(e=>{t.error(e)}),()=>{n||i()}}return r||(async()=>{for(W++;;)try{const[,,e]=await _();await e}catch(e){try{if(!F(e))return}catch(e){return null===u||void 0===u?void 0:u(e)}}})(),{on:q.on,subscribe:G,iterate(e){const t=[],o={done:!1,error:null,resolve:()=>{}},n=G(e,{next(e){t.push(e),o.resolve()},error(e){o.done=!0,o.error=e,o.resolve()},complete(){o.done=!0,o.resolve()}}),r=function(){return d(this,arguments,function*(){for(;;){for(t.length||(yield p(new Promise(e=>o.resolve=e)));t.length;)yield yield p(t.shift());if(o.error)throw o.error;if(o.done)return yield p(void 0)}})}();return r.throw=async e=>(o.done||(o.done=!0,o.error=e,o.resolve()),{done:!0,value:void 0}),r.return=async()=>(n(),{done:!0,value:void 0}),r},async dispose(){if(B=!0,O){const[e]=await O;e.close(1e3,"Normal Closure")}},terminate(){O&&q.emit("closed",new y)}}}class y extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function f(e){return r(e)&&"code"in e&&"reason"in e}}}]);
//# sourceMappingURL=5824.6f5d6d16.chunk.js.map