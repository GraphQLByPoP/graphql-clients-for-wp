{"version":3,"file":"static/js/8787.fb8d9741.chunk.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/common/numbers.js","../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js","../node_modules/monaco-editor/esm/vs/platform/environment/common/environment.js","../node_modules/monaco-editor/esm/vs/platform/instantiation/common/descriptors.js","../node_modules/monaco-editor/esm/vs/platform/instantiation/common/extensions.js","../node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nexport class MovingAverage {\n    constructor() {\n        this._n = 1;\n        this._val = 0;\n    }\n    update(value) {\n        this._val = this._val + (value - this._val) / this._n;\n        this._n += 1;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\nexport class SlidingWindowAverage {\n    constructor(size) {\n        this._n = 0;\n        this._val = 0;\n        this._values = [];\n        this._index = 0;\n        this._sum = 0;\n        this._values = new Array(size);\n        this._values.fill(0, 0, size);\n    }\n    update(value) {\n        const oldValue = this._values[this._index];\n        this._values[this._index] = value;\n        this._index = (this._index + 1) % this._values.length;\n        this._sum -= oldValue;\n        this._sum += value;\n        if (this._n < this._values.length) {\n            this._n += 1;\n        }\n        this._val = this._sum / this._n;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { doHash } from '../../../base/common/hash.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport { clamp, MovingAverage, SlidingWindowAverage } from '../../../base/common/numbers.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { matchesScheme } from '../../../base/common/network.js';\nexport const ILanguageFeatureDebounceService = createDecorator('ILanguageFeatureDebounceService');\nvar IdentityHash;\n(function (IdentityHash) {\n    const _hashes = new WeakMap();\n    let pool = 0;\n    function of(obj) {\n        let value = _hashes.get(obj);\n        if (value === undefined) {\n            value = ++pool;\n            _hashes.set(obj, value);\n        }\n        return value;\n    }\n    IdentityHash.of = of;\n})(IdentityHash || (IdentityHash = {}));\nclass NullDebounceInformation {\n    constructor(_default) {\n        this._default = _default;\n    }\n    get(_model) {\n        return this._default;\n    }\n    update(_model, _value) {\n        return this._default;\n    }\n    default() {\n        return this._default;\n    }\n}\nclass FeatureDebounceInformation {\n    constructor(_logService, _name, _registry, _default, _min, _max) {\n        this._logService = _logService;\n        this._name = _name;\n        this._registry = _registry;\n        this._default = _default;\n        this._min = _min;\n        this._max = _max;\n        this._cache = new LRUCache(50, 0.7);\n    }\n    _key(model) {\n        return model.id + this._registry.all(model).reduce((hashVal, obj) => doHash(IdentityHash.of(obj), hashVal), 0);\n    }\n    get(model) {\n        const key = this._key(model);\n        const avg = this._cache.get(key);\n        return avg\n            ? clamp(avg.value, this._min, this._max)\n            : this.default();\n    }\n    update(model, value) {\n        const key = this._key(model);\n        let avg = this._cache.get(key);\n        if (!avg) {\n            avg = new SlidingWindowAverage(6);\n            this._cache.set(key, avg);\n        }\n        const newValue = clamp(avg.update(value), this._min, this._max);\n        if (!matchesScheme(model.uri, 'output')) {\n            this._logService.trace(`[DEBOUNCE: ${this._name}] for ${model.uri.toString()} is ${newValue}ms`);\n        }\n        return newValue;\n    }\n    _overall() {\n        const result = new MovingAverage();\n        for (const [, avg] of this._cache) {\n            result.update(avg.value);\n        }\n        return result.value;\n    }\n    default() {\n        const value = (this._overall() | 0) || this._default;\n        return clamp(value, this._min, this._max);\n    }\n}\nlet LanguageFeatureDebounceService = class LanguageFeatureDebounceService {\n    constructor(_logService, envService) {\n        this._logService = _logService;\n        this._data = new Map();\n        this._isDev = envService.isExtensionDevelopment || !envService.isBuilt;\n    }\n    for(feature, name, config) {\n        const min = config?.min ?? 50;\n        const max = config?.max ?? min ** 2;\n        const extra = config?.key ?? undefined;\n        const key = `${IdentityHash.of(feature)},${min}${extra ? ',' + extra : ''}`;\n        let info = this._data.get(key);\n        if (!info) {\n            if (this._isDev) {\n                this._logService.debug(`[DEBOUNCE: ${name}] is disabled in developed mode`);\n                info = new NullDebounceInformation(min * 1.5);\n            }\n            else {\n                info = new FeatureDebounceInformation(this._logService, name, feature, (this._overallAverage() | 0) || (min * 1.5), // default is overall default or derived from min-value\n                min, max);\n            }\n            this._data.set(key, info);\n        }\n        return info;\n    }\n    _overallAverage() {\n        // Average of all language features. Not a great value but an approximation\n        const result = new MovingAverage();\n        for (const info of this._data.values()) {\n            result.update(info.default());\n        }\n        return result.value;\n    }\n};\nLanguageFeatureDebounceService = __decorate([\n    __param(0, ILogService),\n    __param(1, IEnvironmentService)\n], LanguageFeatureDebounceService);\nexport { LanguageFeatureDebounceService };\nregisterSingleton(ILanguageFeatureDebounceService, LanguageFeatureDebounceService, 1 /* InstantiationType.Delayed */);\n","import { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IEnvironmentService = createDecorator('environmentService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class SyncDescriptor {\n    constructor(ctor, staticArguments = [], supportsDelayedInstantiation = false) {\n        this.ctor = ctor;\n        this.staticArguments = staticArguments;\n        this.supportsDelayedInstantiation = supportsDelayedInstantiation;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SyncDescriptor } from './descriptors.js';\nconst _registry = [];\nexport function registerSingleton(id, ctorOrDescriptor, supportsDelayedInstantiation) {\n    if (!(ctorOrDescriptor instanceof SyncDescriptor)) {\n        ctorOrDescriptor = new SyncDescriptor(ctorOrDescriptor, [], Boolean(supportsDelayedInstantiation));\n    }\n    _registry.push([id, ctorOrDescriptor]);\n}\nexport function getSingletonServiceDescriptors() {\n    return _registry;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// ------ internal util\nexport var _util;\n(function (_util) {\n    _util.serviceIds = new Map();\n    _util.DI_TARGET = '$di$target';\n    _util.DI_DEPENDENCIES = '$di$dependencies';\n    function getServiceDependencies(ctor) {\n        return ctor[_util.DI_DEPENDENCIES] || [];\n    }\n    _util.getServiceDependencies = getServiceDependencies;\n})(_util || (_util = {}));\nexport const IInstantiationService = createDecorator('instantiationService');\nfunction storeServiceDependency(id, target, index) {\n    if (target[_util.DI_TARGET] === target) {\n        target[_util.DI_DEPENDENCIES].push({ id, index });\n    }\n    else {\n        target[_util.DI_DEPENDENCIES] = [{ id, index }];\n        target[_util.DI_TARGET] = target;\n    }\n}\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator(serviceId) {\n    if (_util.serviceIds.has(serviceId)) {\n        return _util.serviceIds.get(serviceId);\n    }\n    const id = function (target, key, index) {\n        if (arguments.length !== 3) {\n            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n        }\n        storeServiceDependency(id, target, index);\n    };\n    id.toString = () => serviceId;\n    _util.serviceIds.set(serviceId, id);\n    return id;\n}\n"],"names":["clamp","value","min","max","Math","MovingAverage","constructor","this","_n","_val","update","SlidingWindowAverage","size","_values","_index","_sum","Array","fill","oldValue","length","__decorate","decorators","target","key","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","ILanguageFeatureDebounceService","createDecorator","IdentityHash","_hashes","WeakMap","pool","of","obj","get","undefined","set","NullDebounceInformation","_default","_model","_value","default","FeatureDebounceInformation","_logService","_name","_registry","_min","_max","_cache","LRUCache","_key","model","id","all","reduce","hashVal","doHash","avg","newValue","matchesScheme","uri","trace","concat","toString","_overall","result","LanguageFeatureDebounceService","envService","_data","Map","_isDev","isExtensionDevelopment","isBuilt","for","feature","name","config","_config$min","_config$max","_config$key","extra","info","debug","_overallAverage","values","ILogService","IEnvironmentService","registerSingleton","SyncDescriptor","ctor","staticArguments","supportsDelayedInstantiation","ctorOrDescriptor","Boolean","push","getSingletonServiceDescriptors","_util","serviceIds","DI_TARGET","DI_DEPENDENCIES","getServiceDependencies","IInstantiationService","serviceId","has","index","Error","storeServiceDependency"],"sourceRoot":""}