{"version":3,"file":"static/js/7780.5dfee7b2.chunk.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js","../node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { parse } from '../../../base/common/glob.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { basename, posix } from '../../../base/common/path.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { startsWithUTF8BOM } from '../../../base/common/strings.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nlet registeredAssociations = [];\nlet nonUserRegisteredAssociations = [];\nlet userRegisteredAssociations = [];\n/**\n * Associate a language to the registry (platform).\n * * **NOTE**: This association will lose over associations registered using `registerConfiguredLanguageAssociation`.\n * * **NOTE**: Use `clearPlatformLanguageAssociations` to remove all associations registered using this function.\n */\nexport function registerPlatformLanguageAssociation(association, warnOnOverwrite = false) {\n    _registerLanguageAssociation(association, false, warnOnOverwrite);\n}\nfunction _registerLanguageAssociation(association, userConfigured, warnOnOverwrite) {\n    // Register\n    const associationItem = toLanguageAssociationItem(association, userConfigured);\n    registeredAssociations.push(associationItem);\n    if (!associationItem.userConfigured) {\n        nonUserRegisteredAssociations.push(associationItem);\n    }\n    else {\n        userRegisteredAssociations.push(associationItem);\n    }\n    // Check for conflicts unless this is a user configured association\n    if (warnOnOverwrite && !associationItem.userConfigured) {\n        registeredAssociations.forEach(a => {\n            if (a.mime === associationItem.mime || a.userConfigured) {\n                return; // same mime or userConfigured is ok\n            }\n            if (associationItem.extension && a.extension === associationItem.extension) {\n                console.warn(`Overwriting extension <<${associationItem.extension}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.filename && a.filename === associationItem.filename) {\n                console.warn(`Overwriting filename <<${associationItem.filename}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.filepattern && a.filepattern === associationItem.filepattern) {\n                console.warn(`Overwriting filepattern <<${associationItem.filepattern}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.firstline && a.firstline === associationItem.firstline) {\n                console.warn(`Overwriting firstline <<${associationItem.firstline}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n        });\n    }\n}\nfunction toLanguageAssociationItem(association, userConfigured) {\n    return {\n        id: association.id,\n        mime: association.mime,\n        filename: association.filename,\n        extension: association.extension,\n        filepattern: association.filepattern,\n        firstline: association.firstline,\n        userConfigured: userConfigured,\n        filenameLowercase: association.filename ? association.filename.toLowerCase() : undefined,\n        extensionLowercase: association.extension ? association.extension.toLowerCase() : undefined,\n        filepatternLowercase: association.filepattern ? parse(association.filepattern.toLowerCase()) : undefined,\n        filepatternOnPath: association.filepattern ? association.filepattern.indexOf(posix.sep) >= 0 : false\n    };\n}\n/**\n * Clear language associations from the registry (platform).\n */\nexport function clearPlatformLanguageAssociations() {\n    registeredAssociations = registeredAssociations.filter(a => a.userConfigured);\n    nonUserRegisteredAssociations = [];\n}\n/**\n * @see `getMimeTypes`\n */\nexport function getLanguageIds(resource, firstLine) {\n    return getAssociations(resource, firstLine).map(item => item.id);\n}\nfunction getAssociations(resource, firstLine) {\n    let path;\n    if (resource) {\n        switch (resource.scheme) {\n            case Schemas.file:\n                path = resource.fsPath;\n                break;\n            case Schemas.data: {\n                const metadata = DataUri.parseMetaData(resource);\n                path = metadata.get(DataUri.META_DATA_LABEL);\n                break;\n            }\n            case Schemas.vscodeNotebookCell:\n                // File path not relevant for language detection of cell\n                path = undefined;\n                break;\n            default:\n                path = resource.path;\n        }\n    }\n    if (!path) {\n        return [{ id: 'unknown', mime: Mimes.unknown }];\n    }\n    path = path.toLowerCase();\n    const filename = basename(path);\n    // 1.) User configured mappings have highest priority\n    const configuredLanguage = getAssociationByPath(path, filename, userRegisteredAssociations);\n    if (configuredLanguage) {\n        return [configuredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n    }\n    // 2.) Registered mappings have middle priority\n    const registeredLanguage = getAssociationByPath(path, filename, nonUserRegisteredAssociations);\n    if (registeredLanguage) {\n        return [registeredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n    }\n    // 3.) Firstline has lowest priority\n    if (firstLine) {\n        const firstlineLanguage = getAssociationByFirstline(firstLine);\n        if (firstlineLanguage) {\n            return [firstlineLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n        }\n    }\n    return [{ id: 'unknown', mime: Mimes.unknown }];\n}\nfunction getAssociationByPath(path, filename, associations) {\n    let filenameMatch = undefined;\n    let patternMatch = undefined;\n    let extensionMatch = undefined;\n    // We want to prioritize associations based on the order they are registered so that the last registered\n    // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\n    for (let i = associations.length - 1; i >= 0; i--) {\n        const association = associations[i];\n        // First exact name match\n        if (filename === association.filenameLowercase) {\n            filenameMatch = association;\n            break; // take it!\n        }\n        // Longest pattern match\n        if (association.filepattern) {\n            if (!patternMatch || association.filepattern.length > patternMatch.filepattern.length) {\n                const target = association.filepatternOnPath ? path : filename; // match on full path if pattern contains path separator\n                if (association.filepatternLowercase?.(target)) {\n                    patternMatch = association;\n                }\n            }\n        }\n        // Longest extension match\n        if (association.extension) {\n            if (!extensionMatch || association.extension.length > extensionMatch.extension.length) {\n                if (filename.endsWith(association.extensionLowercase)) {\n                    extensionMatch = association;\n                }\n            }\n        }\n    }\n    // 1.) Exact name match has second highest priority\n    if (filenameMatch) {\n        return filenameMatch;\n    }\n    // 2.) Match on pattern\n    if (patternMatch) {\n        return patternMatch;\n    }\n    // 3.) Match on extension comes next\n    if (extensionMatch) {\n        return extensionMatch;\n    }\n    return undefined;\n}\nfunction getAssociationByFirstline(firstLine) {\n    if (startsWithUTF8BOM(firstLine)) {\n        firstLine = firstLine.substr(1);\n    }\n    if (firstLine.length > 0) {\n        // We want to prioritize associations based on the order they are registered so that the last registered\n        // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\n        for (let i = registeredAssociations.length - 1; i >= 0; i--) {\n            const association = registeredAssociations[i];\n            if (!association.firstline) {\n                continue;\n            }\n            const matches = firstLine.match(association.firstline);\n            if (matches && matches.length > 0) {\n                return association;\n            }\n        }\n    }\n    return undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { regExpLeadsToEndlessLoop } from '../../../base/common/strings.js';\nimport { clearPlatformLanguageAssociations, getLanguageIds, registerPlatformLanguageAssociation } from './languagesAssociations.js';\nimport { ModesRegistry, PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst NULL_LANGUAGE_ID = 'vs.editor.nullLanguage';\nexport class LanguageIdCodec {\n    constructor() {\n        this._languageIdToLanguage = [];\n        this._languageToLanguageId = new Map();\n        this._register(NULL_LANGUAGE_ID, 0 /* LanguageId.Null */);\n        this._register(PLAINTEXT_LANGUAGE_ID, 1 /* LanguageId.PlainText */);\n        this._nextLanguageId = 2;\n    }\n    _register(language, languageId) {\n        this._languageIdToLanguage[languageId] = language;\n        this._languageToLanguageId.set(language, languageId);\n    }\n    register(language) {\n        if (this._languageToLanguageId.has(language)) {\n            return;\n        }\n        const languageId = this._nextLanguageId++;\n        this._register(language, languageId);\n    }\n    encodeLanguageId(languageId) {\n        return this._languageToLanguageId.get(languageId) || 0 /* LanguageId.Null */;\n    }\n    decodeLanguageId(languageId) {\n        return this._languageIdToLanguage[languageId] || NULL_LANGUAGE_ID;\n    }\n}\nexport class LanguagesRegistry extends Disposable {\n    static { this.instanceCount = 0; }\n    constructor(useModesRegistry = true, warnOnOverwrite = false) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        LanguagesRegistry.instanceCount++;\n        this._warnOnOverwrite = warnOnOverwrite;\n        this.languageIdCodec = new LanguageIdCodec();\n        this._dynamicLanguages = [];\n        this._languages = {};\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        if (useModesRegistry) {\n            this._initializeFromRegistry();\n            this._register(ModesRegistry.onDidChangeLanguages((m) => {\n                this._initializeFromRegistry();\n            }));\n        }\n    }\n    dispose() {\n        LanguagesRegistry.instanceCount--;\n        super.dispose();\n    }\n    _initializeFromRegistry() {\n        this._languages = {};\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        clearPlatformLanguageAssociations();\n        const desc = [].concat(ModesRegistry.getLanguages()).concat(this._dynamicLanguages);\n        this._registerLanguages(desc);\n    }\n    _registerLanguages(desc) {\n        for (const d of desc) {\n            this._registerLanguage(d);\n        }\n        // Rebuild fast path maps\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        Object.keys(this._languages).forEach((langId) => {\n            const language = this._languages[langId];\n            if (language.name) {\n                this._nameMap[language.name] = language.identifier;\n            }\n            language.aliases.forEach((alias) => {\n                this._lowercaseNameMap[alias.toLowerCase()] = language.identifier;\n            });\n            language.mimetypes.forEach((mimetype) => {\n                this._mimeTypesMap[mimetype] = language.identifier;\n            });\n        });\n        Registry.as(Extensions.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds());\n        this._onDidChange.fire();\n    }\n    _registerLanguage(lang) {\n        const langId = lang.id;\n        let resolvedLanguage;\n        if (hasOwnProperty.call(this._languages, langId)) {\n            resolvedLanguage = this._languages[langId];\n        }\n        else {\n            this.languageIdCodec.register(langId);\n            resolvedLanguage = {\n                identifier: langId,\n                name: null,\n                mimetypes: [],\n                aliases: [],\n                extensions: [],\n                filenames: [],\n                configurationFiles: [],\n                icons: []\n            };\n            this._languages[langId] = resolvedLanguage;\n        }\n        this._mergeLanguage(resolvedLanguage, lang);\n    }\n    _mergeLanguage(resolvedLanguage, lang) {\n        const langId = lang.id;\n        let primaryMime = null;\n        if (Array.isArray(lang.mimetypes) && lang.mimetypes.length > 0) {\n            resolvedLanguage.mimetypes.push(...lang.mimetypes);\n            primaryMime = lang.mimetypes[0];\n        }\n        if (!primaryMime) {\n            primaryMime = `text/x-${langId}`;\n            resolvedLanguage.mimetypes.push(primaryMime);\n        }\n        if (Array.isArray(lang.extensions)) {\n            if (lang.configuration) {\n                // insert first as this appears to be the 'primary' language definition\n                resolvedLanguage.extensions = lang.extensions.concat(resolvedLanguage.extensions);\n            }\n            else {\n                resolvedLanguage.extensions = resolvedLanguage.extensions.concat(lang.extensions);\n            }\n            for (const extension of lang.extensions) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, extension: extension }, this._warnOnOverwrite);\n            }\n        }\n        if (Array.isArray(lang.filenames)) {\n            for (const filename of lang.filenames) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filename: filename }, this._warnOnOverwrite);\n                resolvedLanguage.filenames.push(filename);\n            }\n        }\n        if (Array.isArray(lang.filenamePatterns)) {\n            for (const filenamePattern of lang.filenamePatterns) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filepattern: filenamePattern }, this._warnOnOverwrite);\n            }\n        }\n        if (typeof lang.firstLine === 'string' && lang.firstLine.length > 0) {\n            let firstLineRegexStr = lang.firstLine;\n            if (firstLineRegexStr.charAt(0) !== '^') {\n                firstLineRegexStr = '^' + firstLineRegexStr;\n            }\n            try {\n                const firstLineRegex = new RegExp(firstLineRegexStr);\n                if (!regExpLeadsToEndlessLoop(firstLineRegex)) {\n                    registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, firstline: firstLineRegex }, this._warnOnOverwrite);\n                }\n            }\n            catch (err) {\n                // Most likely, the regex was bad\n                console.warn(`[${lang.id}]: Invalid regular expression \\`${firstLineRegexStr}\\`: `, err);\n            }\n        }\n        resolvedLanguage.aliases.push(langId);\n        let langAliases = null;\n        if (typeof lang.aliases !== 'undefined' && Array.isArray(lang.aliases)) {\n            if (lang.aliases.length === 0) {\n                // signal that this language should not get a name\n                langAliases = [null];\n            }\n            else {\n                langAliases = lang.aliases;\n            }\n        }\n        if (langAliases !== null) {\n            for (const langAlias of langAliases) {\n                if (!langAlias || langAlias.length === 0) {\n                    continue;\n                }\n                resolvedLanguage.aliases.push(langAlias);\n            }\n        }\n        const containsAliases = (langAliases !== null && langAliases.length > 0);\n        if (containsAliases && langAliases[0] === null) {\n            // signal that this language should not get a name\n        }\n        else {\n            const bestName = (containsAliases ? langAliases[0] : null) || langId;\n            if (containsAliases || !resolvedLanguage.name) {\n                resolvedLanguage.name = bestName;\n            }\n        }\n        if (lang.configuration) {\n            resolvedLanguage.configurationFiles.push(lang.configuration);\n        }\n        if (lang.icon) {\n            resolvedLanguage.icons.push(lang.icon);\n        }\n    }\n    isRegisteredLanguageId(languageId) {\n        if (!languageId) {\n            return false;\n        }\n        return hasOwnProperty.call(this._languages, languageId);\n    }\n    getRegisteredLanguageIds() {\n        return Object.keys(this._languages);\n    }\n    getLanguageIdByLanguageName(languageName) {\n        const languageNameLower = languageName.toLowerCase();\n        if (!hasOwnProperty.call(this._lowercaseNameMap, languageNameLower)) {\n            return null;\n        }\n        return this._lowercaseNameMap[languageNameLower];\n    }\n    getLanguageIdByMimeType(mimeType) {\n        if (!mimeType) {\n            return null;\n        }\n        if (hasOwnProperty.call(this._mimeTypesMap, mimeType)) {\n            return this._mimeTypesMap[mimeType];\n        }\n        return null;\n    }\n    guessLanguageIdByFilepathOrFirstLine(resource, firstLine) {\n        if (!resource && !firstLine) {\n            return [];\n        }\n        return getLanguageIds(resource, firstLine);\n    }\n}\n"],"names":["registeredAssociations","nonUserRegisteredAssociations","userRegisteredAssociations","registerPlatformLanguageAssociation","association","userConfigured","warnOnOverwrite","associationItem","id","mime","filename","extension","filepattern","firstline","filenameLowercase","toLowerCase","undefined","extensionLowercase","filepatternLowercase","parse","filepatternOnPath","indexOf","posix","sep","toLanguageAssociationItem","push","forEach","a","console","warn","concat","_registerLanguageAssociation","arguments","length","clearPlatformLanguageAssociations","filter","getLanguageIds","resource","firstLine","path","scheme","Schemas","file","fsPath","data","DataUri","parseMetaData","get","META_DATA_LABEL","vscodeNotebookCell","Mimes","unknown","basename","configuredLanguage","getAssociationByPath","PLAINTEXT_LANGUAGE_ID","text","registeredLanguage","firstlineLanguage","startsWithUTF8BOM","substr","i","matches","match","getAssociationByFirstline","getAssociations","map","item","associations","filenameMatch","patternMatch","extensionMatch","_association$filepatt","target","call","endsWith","hasOwnProperty","Object","prototype","NULL_LANGUAGE_ID","LanguageIdCodec","constructor","this","_languageIdToLanguage","_languageToLanguageId","Map","_register","_nextLanguageId","language","languageId","set","register","has","encodeLanguageId","decodeLanguageId","LanguagesRegistry","Disposable","useModesRegistry","super","_onDidChange","Emitter","onDidChange","event","instanceCount","_warnOnOverwrite","languageIdCodec","_dynamicLanguages","_languages","_mimeTypesMap","_nameMap","_lowercaseNameMap","_initializeFromRegistry","ModesRegistry","onDidChangeLanguages","m","dispose","desc","getLanguages","_registerLanguages","d","_registerLanguage","keys","langId","name","identifier","aliases","alias","mimetypes","mimetype","Registry","as","Extensions","Configuration","registerOverrideIdentifiers","getRegisteredLanguageIds","fire","lang","resolvedLanguage","extensions","filenames","configurationFiles","icons","_mergeLanguage","primaryMime","Array","isArray","configuration","filenamePatterns","filenamePattern","firstLineRegexStr","charAt","firstLineRegex","RegExp","regExpLeadsToEndlessLoop","err","langAliases","langAlias","containsAliases","bestName","icon","isRegisteredLanguageId","getLanguageIdByLanguageName","languageName","languageNameLower","getLanguageIdByMimeType","mimeType","guessLanguageIdByFilepathOrFirstLine"],"sourceRoot":""}